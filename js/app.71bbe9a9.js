(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-172d3a5a":"bd1fa0c4","chunk-2d217e99":"0feb2932","chunk-39f0b631":"21713508","chunk-5d407af8":"50cc6b54","chunk-63598e01":"f6979823","chunk-79b4b4ec":"865394ee","chunk-79b4b633":"5bd454af","chunk-b3ed099e":"f8ce807a","chunk-bdc3c02a":"a0255763","chunk-e899d686":"3b0e70bd","chunk-ecb64a30":"c24a39d9","chunk-ecb7bab4":"3d297b1b","chunk-ecdee546":"47398de3","chunk-ece386bc":"f7eb5e25"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(e);var c=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,n[1](c)}a[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var m=c;o.push(["93b7","chunk-vendors"]),n()})({"0a78":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIXEwUDDBF3pAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAB3UlEQVRIx+2UP6jaUBTGz40lKS08cHUJ6PJcxNXBQWldCk5dHJzbzn2rhgxSwUEh8AanDFW71KkQXoeighUchBaFlkqiiIUovFtjCVGSezp1rAbt6G/+vvNx/twLcOHChQtHIX6FpVLpWhCEawAA27YnxWLxhx/fg2MCSZIeRiKRZiwWexIKhR4DACwWi60oine6rr+SZfn+rBZbrdZH27aRMYaO46DjOMgYQ8uyWLPZvJMk6dHJxRVFuVmv1x5jDNvtNuZyOczn86hpGiIiGoaxr1arL04OaDQaH1zXxdlsholEAjmOQ0IIptNpNAwDd7sdqqr6TpIk7l81uEMBgiAECSFAKQVd14ExBogI0+kUKKUQCASA5/mrQ7s8GLDZbL65rgvhcBiy2SwIggA8z0MmkwFRFMG2bdxut99lWd6fdEWmadYnk8nzeDx+VSgUIJlMAiEEUqkUBINBGA6H95TS92ddkaqqby3LYoiInuchYwwREVerlVev128Pzf/oiAAAlsvl606n89V1XeA4Dggh4HkeDAaDL6ZpvpFlmZ393CuVyrN+v7/620Gv1/tZLpef/tc/RVGUm/F4/Hs0Gv2q1Wov/foCfoWapn2ORqP7+Xz+iVJ62+120Y/vDy5WAQY8j8cHAAAAAElFTkSuQmCC"},3857:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIXEjoXT9fj0gAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAB4ElEQVRIx7WVvYsTURTFf9E1YTL4AQsbiahgmoFgiBDCpowWFvY2NgqCECurNKmChYX4J5hKxWrdTb2BsMtCmgVt1cEUaywULPIhmeRdm1Hi23mzMyEeuMUMc86597537yQ4GVngFrAJXAbWgJ/Ae2AXOAQUS+AM8Bg4AsQQU+ANcCWu+Drwys9MIsRn4HaczF9HFF6MI+B6FIOHwFwXSCaTks/npVQqSSaTMZkcAGfDxDeALzqxUqlIt9sVz/NEKSWDwUDq9bpYlhVkcj/M4K5OKBQK0u/3RYdSSprNZpDBDnAqSDwBvNAJrVZLTBiPx+I4jn4RPgHn/ojqTpnFh3Q6TbVaNZZrWRblcjkRcAPPmwz++VhEUCp8hkTE1I1jBuIf8F9MJhM6nY5RfDgc0uv19NffgB8mzk1gtthTx3GU67rH+u95njQajaBBfBlWcQrY00nFYnHebrfVaDSS2WwmrutKrVZTqVRKN1D+3grFHeBX0CBls9lpLpeb2rY9NwzaO+B0lFWxtcSq+A7ko+6jGz4hjsHTuBv1EeBFFN8DLizzP3gbQfyrX/FSuAR8OMHggT6gcbHpZykBV/IZK8I9fQCBbcBmhXiycOj7wEVWjDXgOfARuMp/gg1ci0P4DduAVBeXx8Y7AAAAAElFTkSuQmCC"},4288:function(e,t,n){},"93b7":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("2f62"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-full flex flex-col items-stretch",attrs:{id:"app"}},[n("navigation"),n("div",{staticClass:"flex flex-row h-full w-full bg-gray-200 overflow-y-hidden"},[n("div",{staticClass:"w-0 sm:w-1/2 xl:w-1/3 bg-gray-200 overflow-x-hidden overflow-y-hidden"},[n("scroll",{attrs:{ops:e.ops}},[n("div",{staticClass:"p-8"},[n("router-view")],1)])],1),n("map-panel")],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-grow h-full"},[e.loading?n("div",{staticClass:"flex justify-center items-center w-full h-full bg-gray-300 text-gray-400"},[e._m(0)]):e._e(),n("div",{staticClass:"w-full h-full",attrs:{id:"map"}})])},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("i",{staticClass:"huge notched circle loading icon"})])}],c=(n("d81d"),n("e192")),u=n.n(c);function m(e){return e[0][0]===e[1][0]&&e[0][1]===e[1][1]}var d={methods:{adjustMap:function(){var e=this.$store.getters.mapFilterBounds,t=this.$store.getters.mapFilterCenter,n=this.$store.getters.mapFilterValue;if(this.setFilters(n),e)return m(e)?void this.jumpToPoint(e[0]):void this.map.fitBounds(e,{padding:100,duration:0});t&&(this.setFilters({key:"slug",value:this.$route.params.slug}),this.jumpToPoint(t))},setFilters:function(e){e&&e.key&&e.value?"tag"===e.key?(this.map.setFilter("breweries",["has","tag_"+e.value]),this.map.setFilter("ghosts",["!has","tag_"+e.value])):(this.map.setFilter("breweries",["==",e.key,e.value]),this.map.setFilter("ghosts",["!=",e.key,e.value])):this.resetMarkers()},jumpToPoint:function(e){this.map.jumpTo({center:e,zoom:13,essential:!0})},resetMarkers:function(){this.map.setFilter("breweries",null),this.map.setFilter("ghosts",["==","key","value"])}},watch:{"$store.getters.mapFilters":{deep:!0,handler:function(){this.map.isStyleLoaded()&&this.adjustMap()}},"$store.getters.ghosts":function(e){e?this.setFilters(this.$store.getters.mapFilterValue):this.resetMarkers()}}},p=(n("4160"),n("159b"),n("d4ec")),f=n("bee2"),h=n("885b"),b=n.n(h),g=function(){function e(t){var n=t.id,r=t.controls,a=void 0===r?[]:r;Object(p["a"])(this,e),this.id=n,this.controls=a}return Object(f["a"])(e,[{key:"onAdd",value:function(){var e=this;return this.container=document.createElement("div"),this.container.id=this.id,this.container.className="mapboxgl-ctrl-group mapboxgl-ctrl",this.controls.forEach((function(t){var n=document.createElement("i");n.className=t.icon;var r=document.createElement("button");r.title=t.title,r.onclick=t.eventHandler,r.appendChild(n),e.container.appendChild(r)})),this.container}},{key:"onRemove",value:function(){this.container.parentNode.removeChild(this.container),this.map=void 0}}]),e}(),A={methods:{addControls:function(){var e=this,t=new g({id:"map-controls",controls:[{title:"Przywróć główny widok",icon:"home icon",eventHandler:function(){e.$store.commit("resetMap")}},{title:"Przełącz markery",icon:"marker icon",eventHandler:function(){e.$store.commit("toggleGhosts")}}]});this.map.addControl(t,"top-left"),this.map.addControl(new u.a.NavigationControl,"top-left"),this.map.addControl(new u.a.ScaleControl,"bottom-left"),this.map.addControl(new b.a({accessToken:u.a.accessToken,marker:!1,mapboxgl:this.map,types:"country,region,district,place"}))}}},v=(n("b0c0"),n("b85c")),k=(n("96cf"),n("1da1"));function w(e,t,n){return{id:t,type:"symbol",source:{type:"geojson",data:e},layout:{"icon-image":n,"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-anchor":"bottom"}}}var y=[{name:"ghosts",icon:"ghost",offset:[8,-8]},{name:"breweries",icon:"marker",offset:[12,-16]}],x={methods:{buildMarkers:function(){var e=this;this.map.on("load",Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.map.loadImage(n("3857"),(function(t,n){e.map.addImage("marker",n)}));case 2:return t.next=4,e.map.loadImage(n("0a78"),(function(t,n){e.map.addImage("ghost",n)}));case 4:return t.next=6,fetch("/api/map.json?cache="+(new Date).getTime()).then((function(e){return e.json()})).then((function(t){var n,r=Object(v["a"])(y);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.map.addLayer(w(t,a.name,a.icon)),e.buildPopups(a),e.linkMarkers(a.name)}}catch(o){r.e(o)}finally{r.f()}e.adjustMap(),e.loading=!1}));case 6:case"end":return t.stop()}}),t)}))))},linkMarkers:function(e){var t=this;this.map.on("click",e,(function(e){var n=e.features[0].properties.slug;t.$router.push({name:"brewery",params:{slug:n}})}))}}},C=(n("fb6a"),{methods:{buildPopups:function(e){var t=this,n=new u.a.Popup({closeButton:!1,closeOnClick:!1,anchor:"left",maxWidth:"none",offset:e.offset,className:"map-marker-popup text-gray-700"});this.map.on("mousemove",e.name,(function(e){var r=e.features[0].properties.label,a="<i class='flat "+e.features[0].properties.symbol+" flag'></i>",o=e.features[0].geometry.coordinates.slice();while(Math.abs(e.lngLat.lng-o[0])>180)o[0]+=e.lngLat.lng>o[0]?360:-360;n.setLngLat(o).setHTML(a+" "+r).addTo(t.map)})),this.map.on("mouseleave",e.name,(function(){n.remove()}))}}}),F={mixins:[d,A,x,C],mounted:function(){u.a.accessToken="pk.eyJ1Ijoia3Jld2FrIiwiYSI6ImNrNHZncTg0ejA1dGYzamwyd3BoNTZlM2UifQ.5mWq7YOC0cmuCEk9YxzYZg",this.buildMap()},data:function(){return{loading:!0,map:null,filtered:[]}},methods:{buildMap:function(){this.map=new u.a.Map({container:"map",style:"mapbox://styles/krewak/ck4wvhs7q0im51clldzmuv0xp"}),this.addControls(),this.buildMarkers()}}},B=F,M=(n("bd9b"),n("2877")),j=Object(M["a"])(B,s,l,!1,null,null,null),E=j.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"flex items-center justify-between flex-wrap content-end bg-blue-900 text-white p-3"},[n("div",{staticClass:"flex-shrink-0 mb-1"},[n("router-link",{staticClass:"flex text-xl items-end",attrs:{to:{name:"breweries"}}},[n("span",{staticClass:"font-semibold "},[e._v("Odwiedzone browary")]),n("span",{staticClass:"ml-2"},[e._v("Krzysztofa i Joanny")])])],1),n("div",{staticClass:"hidden w-full lg:block flex-grow lg:flex lg:justify-end lg:w-auto"},[n("router-link",{staticClass:"block ml-4",attrs:{to:{name:"about"}}},[e._v("o nas")]),n("router-link",{staticClass:"block ml-4",attrs:{to:{name:"breweries"}}},[e._v("wszystkie browary")]),n("router-link",{staticClass:"block ml-4",attrs:{to:{name:"calendar"}}},[e._v("kalendarz")]),n("router-link",{staticClass:"block ml-4",attrs:{to:{name:"trips"}}},[e._v("wycieczki")]),n("router-link",{staticClass:"block ml-4",attrs:{to:{name:"countries"}}},[e._v("państwa")]),n("router-link",{staticClass:"block ml-4",attrs:{to:{name:"tags"}}},[e._v("tagi")]),n("router-link",{staticClass:"block ml-4",attrs:{to:{name:"notes"}}},[e._v("notatki")]),n("router-link",{staticClass:"block ml-4",attrs:{to:{name:"statistics"}}},[e._v("statystyki")])],1)])},z=[],I={},O=Object(M["a"])(I,T,z,!1,null,null,null),V=O.exports,S=n("77a0"),D=n.n(S),R={components:{"map-panel":E,Navigation:V,Scroll:D.a},data:function(){return{ops:{bar:{background:"#a0aec0"},rail:{gutterOfSide:"4px",gutterOfEnds:"8px"}}}}},U=R,N=Object(M["a"])(U,o,i,!1,null,null,null),Q=N.exports,Y=(n("4288"),n("9483"));function H(e,t){var n=t[0];return 1===e?n=t[1]:e%100===12||e%100===13||e%100===14?n=t[2]:e%10!==2&&e%10!==3&&e%10!==4||(n=t[3]),e+" "+n}Object(Y["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\n For more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var L={methods:{inflectBrewery:function(e){return H(e,["browarów","browar","browarów","browary"])},inflectCountry:function(e){return H(e,["państw","państwo","państw","państwa"])}}},P=(n("45fc"),n("8c4f"));n("4de4");r["default"].use(a["a"]);var W={mapFilters:{id:null,center:null,bounds:null,filter:{key:null,value:null}},ghosts:!0,counters:null,defaultBounds:null},_={mapFilters:function(e){return e.mapFilters},mapFilterCenter:function(e){return e.mapFilters.center},mapFilterBounds:function(e){return e.mapFilters.bounds},mapFilterValue:function(e){return e.mapFilters.filter},counters:function(e){return e.counters},ghosts:function(e){return e.ghosts},defaultBounds:function(e){return e.defaultBounds}},X={setCounters:function(e,t){e.counters=t},setMapDefaultExtremes:function(e,t){e.defaultBounds=[[t.west,t.south],[t.east,t.north]]},resetMap:function(e){e.mapFilters.id=Math.random(),e.mapFilters.center=null,e.mapFilters.bounds=e.defaultBounds,e.mapFilters.filter.key=null,e.mapFilters.filter.value=null},selectBrewery:function(e,t){e.mapFilters.center=t.location.coordinates,e.mapFilters.bounds=null,e.mapFilters.filter.key=null,e.mapFilters.filter.value=null},setFilter:function(e,t){e.mapFilters.center=null,e.mapFilters.bounds=[[t.item.extremes.west,t.item.extremes.south],[t.item.extremes.east,t.item.extremes.north]],e.mapFilters.filter.key=t.type,e.mapFilters.filter.value=t.item.slug},toggleGhosts:function(e){e.ghosts=!e.ghosts}},J=new a["a"].Store({state:W,getters:_,mutations:X});r["default"].use(P["a"]);var Z=[{path:"/",name:"breweries",component:function(){return n.e("chunk-5d407af8").then(n.bind(null,"2906"))},meta:{resetMap:!0}},{path:"/browary/:slug",name:"brewery",component:function(){return n.e("chunk-172d3a5a").then(n.bind(null,"d8af"))}},{path:"/o",name:"about",component:function(){return n.e("chunk-79b4b633").then(n.bind(null,"07c4"))},meta:{resetMap:!0}},{path:"/kalendarz",name:"calendar",component:function(){return n.e("chunk-2d217e99").then(n.bind(null,"c96c"))},meta:{resetMap:!0}},{path:"/kalendarz/:year",name:"calendar.year",component:function(){return n.e("chunk-ecdee546").then(n.bind(null,"8331"))}},{path:"/kalendarz/:year/:month",name:"calendar.month",component:function(){return n.e("chunk-ecdee546").then(n.bind(null,"8331"))}},{path:"/panstwa",name:"countries",component:function(){return n.e("chunk-b3ed099e").then(n.bind(null,"e791"))}},{path:"/panstwa/:slug",name:"country",component:function(){return n.e("chunk-ecb64a30").then(n.bind(null,"cebd"))}},{path:"/wycieczki",name:"trips",component:function(){return n.e("chunk-39f0b631").then(n.bind(null,"a9b4"))}},{path:"/wycieczki/:slug",name:"trip",component:function(){return n.e("chunk-ece386bc").then(n.bind(null,"3067"))}},{path:"/tagi",name:"tags",component:function(){return n.e("chunk-bdc3c02a").then(n.bind(null,"1b6d"))}},{path:"/tagi/:slug",name:"tag",component:function(){return n.e("chunk-ecb7bab4").then(n.bind(null,"c4a2"))}},{path:"/notatki",name:"notes",component:function(){return n.e("chunk-e899d686").then(n.bind(null,"da74"))},meta:{resetMap:!0}},{path:"/statystyki",name:"statistics",component:function(){return n.e("chunk-63598e01").then(n.bind(null,"3181"))},meta:{resetMap:!0}},{path:"/404",name:"404",redirect:{name:"none"}},{path:"/*",name:"none",component:function(){return n.e("chunk-79b4b4ec").then(n.bind(null,"088a"))},meta:{resetMap:!0}}],q=new P["a"]({mode:"history",base:"/",routes:Z});q.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.resetMap}))&&J.commit("resetMap"),n()}));var G=q;r["default"].mixin(L),r["default"].use(a["a"]);var K=new r["default"]({router:G,store:J,render:function(e){return e(Q)}});document.getElementById("favicon").href=n("3857"),fetch("/api/general.json").then((function(e){return e.json()})).then((function(e){K.$mount("#app"),K.$store.commit("setCounters",e.counters),K.$store.commit("setMapDefaultExtremes",e.extremes),K.$store.commit("resetMap")}))},"9f8b":function(e,t,n){},bd9b:function(e,t,n){"use strict";var r=n("9f8b"),a=n.n(r);a.a}});
//# sourceMappingURL=app.71bbe9a9.js.map